import Head from 'next/head'
import Header from '../components/Header'
import ToDoList from '../components/ToDoList'
import Carousel from '../components/Carousel'
import Forms from '../components/Forms'
import Footer from '../components/Footer'

function Home(props) {
  const header_images = props.images
  const header_text = props.text
  return (
    <div>
      <Head>
        <title>Coopers</title>
        <meta name='description' content='Generated by create next app' />
        <link href='fonts/fonts.css' rel='stylesheet' />
        <link href='https://fonts.cdnfonts.com/css/soleil' rel='stylesheet' />
        <link
          href='https://fonts.googleapis.com/css?family=Montserrat'
          rel='stylesheet'
        />
        <link
          href='https://fonts.googleapis.com/css?family=Poppins'
          rel='stylesheet'
        />
        <link
          href='https://fonts.googleapis.com/css2?family=Inter&display=optional'
          rel='stylesheet'
        />
      </Head>
      <Header headerImages={header_images} headerText={header_text} />
      <ToDoList />
      <Carousel />
      <Forms />
      <Footer />
    </div>
  )
}

export async function getServerSideProps({ res }) {
  const header_image = await fetch(
    'https://dario.marbr.net/wp-json/wp/v2/pages/406',
    {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
      },
    }
  )

  const header_text = await fetch(
    'https://dario.marbr.net/wp-json/wp/v2/pages/51',
    {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
      },
    }
  )

  const result_header_text = await header_text.json()
  const result_header_image = await header_image.json()

  return {
    props: {
      images: result_header_image.acf,
      text: result_header_text.acf,
    },
  }
}

export default Home
